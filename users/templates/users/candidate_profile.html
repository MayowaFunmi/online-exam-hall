{% extends 'landing/base1.html' %}

{% load static %}
{% load crispy_forms_tags %}

{% block title %}Candidate Profile Form{% endblock %}

{% block content %}
    <div>
        {% if messages %}
            <ul class="messages">
                {% for message in messages %}
                    <li class="{{ message.tags }}">
                        {{ message }}
                    </li>
                {% endfor %}
            </ul>
        {% endif %}
    </div>

    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        <strong>Username: {{ user }}</strong><br>
        <strong>Status: {{ status }}</strong><br><br>
        {{ profile_form|crispy }}
        {{ form.media }}
        <p><input type="submit" value="Update"></p>
    </form>
{% endblock content %}

{% block javascript %}
    <script>
        $(document).ready(function() {
            $("#id_age").attr({'readonly':'true', 'placeholder':'Press Enter Key After Entering Your Date Of Birth. Your Age Automatically Shows Here'});
            var age = '';
            $('#id_date_of_birth').datepicker({
                dateFormat: 'yy-mm-dd',
                onSelect: function(value, ui) {
                    var today = new Date();
                    age = today.getFullYear() - ui.selectedYear;
                    $("#id_age").val(age);
                },
                changeMonth: true,
                changeYear: true
            })
        })
    </script>
{% endblock javascript %}